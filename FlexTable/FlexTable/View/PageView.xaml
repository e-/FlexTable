<UserControl
    x:Class="FlexTable.View.PageView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:FlexTable.View"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d3view="using:d3.View"
    xmlns:util="using:FlexTable.Util"
    mc:Ignorable="d"
    d:DesignHeight="300"
    d:DesignWidth="400"
    Loaded="UserControl_Loaded"
    x:Name="UserControl"
    >

    <UserControl.Resources>
        <Style TargetType="Border" x:Key="TitleWrapperStyle">
            <Setter Property="Height" Value="90" />
        </Style>
        
        <Style TargetType="TextBlock" x:Key="TitleStyle">
            <Setter Property="FontSize" Value="42" />
            <Setter Property="TextAlignment" Value="Center"></Setter>
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>
        
        <!-- 
        <Style TargetType="TextBlock" x:Key="SubtitleStyle">
            <Setter Property="FontSize" Value="18" />
            <Setter Property="TextAlignment" Value="Center"></Setter>
        </Style>
        -->
        
        <Style TargetType="Border" x:Key="ParagraphLabelBorderStyle">
            <Setter Property="CornerRadius" Value="14" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="9 5" />
            <Setter Property="Margin" Value="5 0" />
            <Setter Property="HorizontalAlignment" Value="Center" />
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>
        
        <Style TargetType="TextBlock" x:Key="ParagraphLabelTextBlockStyle">
            <Setter Property="FontSize" Value="14" />
        </Style>
        
        <util:BooleanToVisibilityConverter x:Name="BooleanToVisibilityConverter" />
        <util:BooleanToInvertedVisibilityConverter x:Name="BooleanToInvertedVisibilityConverter" />        
        
        <Storyboard x:Name="Show">
            <DoubleAnimation EasingFunction="{StaticResource QuarticEaseInOut}" Duration="00:00:00.3"
                             Storyboard.TargetName="Wrapper" Storyboard.TargetProperty="Opacity" To="1" EnableDependentAnimation="True"
                             BeginTime="00:00:00.5"/>
        </Storyboard>

        <Storyboard x:Name="HideStoryboardElement">
            <DoubleAnimation EasingFunction="{StaticResource QuarticEaseInOut}" Duration="00:00:00.3"
                             Storyboard.TargetName="Wrapper" Storyboard.TargetProperty="Opacity" To="0" EnableDependentAnimation="True"
                             />
        </Storyboard>

        <Storyboard x:Name="GoDownStoryboard">
            <DoubleAnimation EasingFunction="{StaticResource QuarticEaseInOut}" Duration="00:00:00.5"
                             Storyboard.TargetName="UserControl" Storyboard.TargetProperty="(Canvas.Top)" To="{Binding PageHeight}">
            </DoubleAnimation>
        </Storyboard>

        <Storyboard x:Name="GoUpStoryboard" Completed="GoUpStoryboard_Completed">
            <DoubleAnimation EasingFunction="{StaticResource QuarticEaseInOut}" Duration="00:00:00.5"
                             Storyboard.TargetName="UserControl" Storyboard.TargetProperty="(Canvas.Top)" To="0">
            </DoubleAnimation>
            <DoubleAnimation EasingFunction="{StaticResource QuarticEaseInOut}" Duration="00:00:00.2" BeginTime="00:00:00.3"
                             Storyboard.TargetName="ChartWrapper" Storyboard.TargetProperty="Opacity" To="0">
            </DoubleAnimation>
        </Storyboard>              
        
        <Color x:Key="LabelForegroundColor">#333</Color>
        <Color x:Key="LabelBackgroundColor">#fff</Color>
        <Color x:Key="ActivatedLabelForegroundColor">#000</Color>
        <Color x:Key="ActivatedLabelBackgroundColor">#ddd</Color>
    </UserControl.Resources>
    
    <StackPanel Opacity="0" x:Name="Wrapper" Tapped="Wrapper_Tapped">
        <StackPanel Height="{Binding PageHeight}" Visibility="{Binding IsSummaryVisible, Converter={StaticResource BooleanToVisibilityConverter}}" Background="White" 
                    x:Name="ChartWrapper" Padding="20">
            <ScrollViewer HorizontalScrollBarVisibility="Hidden" HorizontalScrollMode="Auto" 
                          VerticalScrollMode="Disabled" VerticalScrollBarVisibility="Hidden"
                          x:Name="Carousel" Width="{StaticResource ParagraphWidth}" ViewChanged="Carousel_ViewChanged" ViewChanging="Carousel_ViewChanging">
                <StackPanel Orientation="Horizontal" x:Name="ParagraphContainer" IsHitTestVisible="False">
                    <StackPanel Visibility="{Binding IsBarChartVisible, Converter={StaticResource BooleanToVisibilityConverter}}" Tag="Bar Chart">
                        <Border Style="{StaticResource TitleWrapperStyle}">
                            <TextBlock Style="{StaticResource TitleStyle}" x:Name="BarChartTitleElement" />
                        </Border>
                        <d3view:BarChart x:Name="BarChartElement" Width="{StaticResource ParagraphWidth}" Height="{StaticResource ParagraphHeight}" />
                    </StackPanel>

                    <StackPanel Visibility="{Binding IsLineChartVisible, Converter={StaticResource BooleanToVisibilityConverter}}" Tag="Line Chart">
                        <Border Style="{StaticResource TitleWrapperStyle}">
                            <TextBlock Style="{StaticResource TitleStyle}" x:Name="LineChartTitleElement" />
                        </Border>
                        <d3view:LineChart x:Name="LineChartElement" Width="{StaticResource ParagraphWidth}" Height="{StaticResource ParagraphHeight}" />
                    </StackPanel>
                    
                    <StackPanel Visibility="{Binding IsDistributionVisible, Converter={StaticResource BooleanToVisibilityConverter}}" Tag="Distribution">
                        <Border Style="{StaticResource TitleWrapperStyle}">
                            <TextBlock Style="{StaticResource TitleStyle}" x:Name="DistributionViewTitleElement" />
                        </Border>
                        <local:DistributionView x:Name="DistributionViewElement" Width="{StaticResource ParagraphWidth}" Height="{StaticResource ParagraphHeight}"/>
                    </StackPanel>
                    
                    <StackPanel Visibility="{Binding IsDescriptiveStatisticsVisible, Converter={StaticResource BooleanToVisibilityConverter}}" Tag="Statistics">
                        <Border Style="{StaticResource TitleWrapperStyle}">
                            <TextBlock Style="{StaticResource TitleStyle}" x:Name="DescriptiveStatisticsTitleElement" />
                        </Border>
                        <local:DescriptiveStatisticsView x:Name="DescriptiveStatisticsViewElement" Width="{StaticResource ParagraphWidth}" Height="{StaticResource ParagraphHeight}"/>
                    </StackPanel>

                    <StackPanel Visibility="{Binding IsGroupedBarChartVisible, Converter={StaticResource BooleanToVisibilityConverter}}" Tag="Grouped Bar Chart">
                        <Border Style="{StaticResource TitleWrapperStyle}">
                            <TextBlock Style="{StaticResource TitleStyle}" x:Name="GroupedBarChartTitleElement" />
                        </Border>
                        <d3view:GroupedBarChart x:Name="GroupedBarChartElement" Width="{StaticResource ParagraphWidth}" Height="{StaticResource ParagraphHeight}" />
                    </StackPanel>

                    <StackPanel Visibility="{Binding IsScatterplotVisible, Converter={StaticResource BooleanToVisibilityConverter}}" Tag="Scatterplot">
                        <Border Style="{StaticResource TitleWrapperStyle}">
                            <TextBlock Style="{StaticResource TitleStyle}" x:Name="ScatterplotTitleElement" />
                        </Border>
                        <d3view:Scatterplot x:Name="ScatterplotElement" Width="{StaticResource ParagraphWidth}" Height="{StaticResource ParagraphHeight}" />
                    </StackPanel>

                    <StackPanel Visibility="{Binding IsPivotTableVisible, Converter={StaticResource BooleanToVisibilityConverter}}" Tag="Pivot Table">
                        <Border Style="{StaticResource TitleWrapperStyle}">
                            <TextBlock Style="{StaticResource TitleStyle}" x:Name="PivotTableTitleElement" />
                        </Border>
                        <local:PivotTableView x:Name="PivotTableViewElement" VerticalAlignment="Center"                                              
                           Width="{StaticResource ParagraphWidth}" Height="{StaticResource ParagraphHeight}"></local:PivotTableView>
                    </StackPanel>

                    <StackPanel Visibility="{Binding IsCorrelationStatisticsVisible, Converter={StaticResource BooleanToVisibilityConverter}}" Tag="Statistics">
                        <Border Style="{StaticResource TitleWrapperStyle}">
                            <TextBlock Style="{StaticResource TitleStyle}" x:Name="CorrelationStatisticsTitleElement" />
                        </Border>
                        <local:CorrelationStatisticsView x:Name="CorrelationStatisticsViewElement" Width="{StaticResource ParagraphWidth}" Height="{StaticResource ParagraphHeight}"/>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>
            <StackPanel x:Name="ParagraphLabelContainer" Height="40" Orientation="Horizontal" HorizontalAlignment="Center"></StackPanel>
        </StackPanel>
        <Border Height="{Binding PageHeight}" Visibility="{Binding IsSummaryVisible, Converter={StaticResource BooleanToInvertedVisibilityConverter}}" Padding="20" Background="White">
            <StackPanel VerticalAlignment="Center">
                <TextBlock FontSize="25" TextAlignment="Center">Please select a column to preview.</TextBlock>
            </StackPanel>
        </Border>
        <Image Source="ms-appx:///Assets/horizontal-separator.png" Width="{Binding PageWidth}" Height="8"></Image>
    </StackPanel>
</UserControl>
